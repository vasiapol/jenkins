node {
  def remote = [:]
  remote.name = 'test'
  remote.host = '192.168.103.187'
  remote.user = 'root'
  remote.password = '123456123'
  remote.allowAnyHosts = true
 
  stage('Pulling changes') {
    sshCommand remote: remote, command: "cd API_Server_Demo;git checkout Dev; git pull origin Dev"
  }
  stage('Restarting API') {
    sshCommand remote: remote, command: "systemctl restart API"
  }
  stage('Runing tests') {
    sshCommand remote: remote, command: "newman run API_TESTS.json"
  }
}

